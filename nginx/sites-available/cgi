server {
	listen 443 ssl http2;
	listen [::]:443 ssl http2;
	server_name cgi.queerlil.tools;
	ssl_certificate /etc/nginx/tls/queerlil.tools.crt;
	ssl_certificate_key /etc/nginx/tls/queerlil.tools.key;

	location / {
		root /var/www/cgi;
		include fastcgi.conf;
		fastcgi_pass unix:/run/fcgiwrap.socket;
		fastcgi_param DOCUMENT_ROOT /var/www/cgi;
		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
	}

	location = /favicon.ico {
		alias /var/www/assets/favicons/cgi/favicon.ico;
		access_log off;
		log_not_found off;
		expires 1y;
		add_header Cache-Control "public, immutable";
	}

	location ~ /(composer\.(json|lock)|vendor) {
		deny all;
		return 404;
	}
}
